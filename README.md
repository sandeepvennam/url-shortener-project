# URL Shortener Project
This project provides an efficient, scalable, and secure URL Shortener application. The infrastructure is automated using Terraform, the backend logic is implemented in AWS Lambda, and the API is exposed through Amazon API Gateway.

## Project Directory Structure

```
url-shortener-project/
├── .github/
│   └── workflows/
│       └── ci-cd.yml          # GitHub Actions workflow for CI/CD
├── lambda/
│   ├── lambda_function.py     # Python code for the Lambda function
│   ├── requirements.txt       # Python dependencies for the Lambda function
│   └── build_lambda.sh        # Script to package the Lambda code into a deployable zip
├── terraform/
│   ├── backend.tf             # Backend configuration for Terraform state storage
│   ├── provider.tf            # Provider configurations (AWS)
│   ├── main.tf                # Main Terraform configuration for all resources
│   ├── variables.tf           # Input variables for Terraform configurations
│   ├── outputs.tf             # Outputs generated by Terraform resources
├── README.md                  # Project documentation
└── .gitignore                 # Files and directories to exclude from version control
```
# Overview
## Purpose
The URL Shortener application takes long URLs and converts them into short, easily shareable links. When accessed, these links redirect users to the original URL.

# Architecture
**AWS Lambda**: Core backend logic to process requests for creating short URLs and resolving them back to the original URLs.

**Amazon API Gateway**: Provides REST API endpoints to interact with the application.

**Amazon DynamoDB**: Serves as the database for storing mappings between short and long URLs.

**Amazon CloudWatch**: Offers monitoring and logging for Lambda function and API Gateway errors. 

**Terraform**: Automates infrastructure provisioning and ensures version-controlled, repeatable deployments.

**GitHub Actions**: Automates the CI/CD pipeline, including Terraform deployments and Lambda deployments.

# Architectural Decisions
## Key Resource Choices

1. **AWS Lambda**:

- Serverless compute ensures cost-efficiency and scalability.
- Automatically scales with traffic and simplifies operations.

2. **Amazon API Gateway**:

- Provides secure and scalable REST API endpoints.
- Integrates seamlessly with AWS Lambda.

3. **Amazon DynamoDB**:

- NoSQL database optimized for low-latency, high-throughput operations.
- PAY_PER_REQUEST billing mode minimizes costs for infrequent usage.

4. **Amazon CloudWatch**:

- Enables monitoring of application performance and error rates.

5. **Terraform**:

- Ensures consistent, version-controlled infrastructure provisioning.
- Simplifies the management of complex dependencies across AWS resources.

6. **GitHub Actions**:

- Automates the deployment process, reducing manual intervention.
- Streamlines CI/CD workflows for both infrastructure and application updates.

## Prerequisites
1. **AWS Account**:

Ensure you have credentials with appropriate permissions for creating AWS resources.

2. **Terraform**:

Install Terraform version 1.3.0 or above.

3. **GitHub Actions**:

Configure GitHub repository secrets for AWS credentials (AWS_ACCESS_KEY_ID and AWS_SECRET_ACCESS_KEY).

4. **Dependencies**:

Install zip utility for packaging the Lambda function, Terraform to test locally.

# How to Try Out the Application
## Steps to Deploy : 2 ways

## Manual way to deploy

1. **Clone the Repository**:
```
git clone https://github.com/sandeepvennam/url-shortener-project.git
cd url-shortener-project
```
2. **Initialize Terraform**: Navigate to the terraform/ directory and initialize Terraform:
```
cd terraform
terraform init
```
3. **Review and Apply the Terraform Plan**:
```
terraform apply
```
4. **Build and Deploy the Lambda Function**:
Run the build_lambda.sh script in the lambda/ directory to package and deploy the Lambda function:
```
cd ../lambda
./build_lambda.sh
```
5. **Access the Application**: 
Once deployed, note the API Gateway endpoint from the Terraform output. Use the following endpoints:
POST /: Submit long URLs to create short URLs.

```
curl -X POST "<API_GATEWAY_URL>/shortener" \              # Replace APU Gateway URL
-H "Content-Type: application/json" \
-d '{"long_url": "https://example.com/very/long/url"}'    # You can try with any URL
```

GET /{short_url= code}: Retrieve the original URL for a given short URL ID.
```
curl -X GET "<API_GATEWAY_URL>/shortener?short_url=abc123"   # Replace API Gateway URL, and abc123 with generated hash key at the end of the URL

```
## Second way: : Automative way
# CI/CD Workflow
**Note**: Make sure you added AWS credentails to the repository secrets settings (aws access key and secret key as per variables declared in github pipeline yml file)

**Triggering Deployment**: Push changes to the main branch to automatically trigger the GitHub Actions pipeline.
- The pipeline will:
   - Initialize and apply Terraform configurations.
   - Package and deploy the Lambda function.
   - Output the API Gateway URL.

Once any changes are made in the repostiroy with respect to master branch and commited, then Github action feature will automatically trigger the pipeline to provision the resources and deploy the application.
![image](https://github.com/user-attachments/assets/ede498e4-fcfb-4f65-ab34-65cae3694ad5)



# Security Measures considered
1.**Least Privilege IAM Policies**:

- Lambda has access only to required DynamoDB and CloudWatch resources.
- Terraform backend resources (S3, DynamoDB) are encrypted.

2. **Encryption**:

- DynamoDB and S3 are configured with encryption at rest.

3. **Monitoring**:

- Lambda logs are redirected respective cloudwatch loggroups

4. **API Gateway**:

- API Gateway logs are redirected respective cloudwatch loggroups

# Future Extensions
1.**Custom Domain**: Integrate API Gateway with a custom domain for a more professional appearance.

2.**Analytics**: Track URL usage statistics (e.g., click counts, timestamps) in DynamoDB or Amazon Redshift.

3.**Caching**: Use Amazon CloudFront to improve API response times for frequently accessed URLs.

4.**Authentication**: Secure API Gateway endpoints with AWS Cognito (For internal/external organisation people) or API keys.



# Conclusion
This project demonstrates a fully automated, serverless URL shortener application with robust infrastructure and monitoring. The architectural choices focus on security, and operational efficiency. It is easy to extend and adapt for additional functionality.
